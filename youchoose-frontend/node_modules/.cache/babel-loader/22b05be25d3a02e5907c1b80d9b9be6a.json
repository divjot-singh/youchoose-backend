{"ast":null,"code":"var _jsxFileName = \"/Users/divjotsingh/Documents/Youchoose/youchoose/src/providers/userProvider.tsx\",\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$();\n\nimport { createContext, useContext, useEffect, useState } from \"react\";\nimport Authenticate from \"../services/authService\";\nimport { GetCurrentUser, Logout } from \"../services/firebaseService\";\nimport { useCommonComponents } from \"./commonComponentsProvider\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst UserContext = /*#__PURE__*/createContext({\n  user: null,\n  authenticate: async authType => {},\n  signOut: async () => {}\n});\nexport const UserContextWrapper = _ref => {\n  _s();\n\n  let {\n    children,\n    isAppInitialised\n  } = _ref;\n  const [user, setUser] = useState(null);\n  const commonComponents = useCommonComponents();\n\n  const setInitialUser = async () => {\n    commonComponents.showLoader(null);\n    const currentUser = await GetCurrentUser();\n    commonComponents.hideLoader();\n    setUser(currentUser);\n  };\n\n  useEffect(() => {\n    if (isAppInitialised) {\n      setInitialUser();\n    }\n  }, [isAppInitialised]);\n\n  const authenticate = async (authType, email, password, username) => {\n    commonComponents.showLoader(null);\n    const result = await Authenticate(authType, email, password, username);\n    commonComponents.hideLoader();\n\n    if (result) {\n      setUser(result);\n    }\n  };\n\n  const signOut = async () => {\n    commonComponents.showLoader(null);\n    await Logout();\n    commonComponents.hideLoader();\n    setUser(null);\n  };\n\n  return /*#__PURE__*/_jsxDEV(UserContext.Provider, {\n    value: {\n      user,\n      authenticate,\n      signOut\n    },\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 50,\n    columnNumber: 9\n  }, this);\n};\n\n_s(UserContextWrapper, \"M1ez9CEPXY4ESt62ZmmtCGXoyQI=\", false, function () {\n  return [useCommonComponents];\n});\n\n_c = UserContextWrapper;\nexport const useAuth = () => {\n  _s2();\n\n  return useContext(UserContext);\n};\n\n_s2(useAuth, \"gDsCjeeItUuvgOWf1v4qoK9RF6k=\");\n\nvar _c;\n\n$RefreshReg$(_c, \"UserContextWrapper\");","map":{"version":3,"names":["createContext","useContext","useEffect","useState","Authenticate","GetCurrentUser","Logout","useCommonComponents","UserContext","user","authenticate","authType","signOut","UserContextWrapper","children","isAppInitialised","setUser","commonComponents","setInitialUser","showLoader","currentUser","hideLoader","email","password","username","result","useAuth"],"sources":["/Users/divjotsingh/Documents/Youchoose/youchoose/src/providers/userProvider.tsx"],"sourcesContent":["import { createContext, useContext, useEffect, useState } from \"react\";\nimport User from \"../entities/user\";\nimport Authenticate, { AuthType } from \"../services/authService\";\nimport { GetCurrentUser, Logout } from \"../services/firebaseService\";\nimport { CommonComponentsContextValue, useCommonComponents } from \"./commonComponentsProvider\";\n\ninterface UserContextWrapperProps{\n    children: JSX.Element | null,\n    isAppInitialised: boolean\n}\nexport interface UserContextValue{\n    user: User | null;\n    authenticate: (authType: AuthType, email?:string, password?:string, username?:string) => Promise<void>\n    signOut: () => Promise<void>\n}\nconst UserContext = createContext<UserContextValue>({\n    user:null,\n    authenticate:async (authType) => {},\n    signOut:async () => {}\n})\nexport const UserContextWrapper = ({children,isAppInitialised}: UserContextWrapperProps) => {\n    const [user, setUser] = useState<User | null>(null)\n    const commonComponents:CommonComponentsContextValue = useCommonComponents()\n    const setInitialUser = async () => {\n        commonComponents.showLoader(null)\n        const currentUser:User | null | Error= await GetCurrentUser()\n        commonComponents.hideLoader()\n        setUser(currentUser)\n    }\n    useEffect(() => {\n        if(isAppInitialised){\n            setInitialUser()\n        }\n    },[isAppInitialised])\n    const authenticate = async (authType:AuthType, email?:string, password?:string, username?:string) => {\n        commonComponents.showLoader(null)\n        const result:User | null | Error = await Authenticate(authType, email, password, username);\n        commonComponents.hideLoader()\n        if(result){\n            setUser(result)\n        }\n    }\n    const signOut = async () => {\n        commonComponents.showLoader(null)\n        await Logout()\n        commonComponents.hideLoader()\n        setUser(null)\n    }\n    return (\n        <UserContext.Provider value={{\n            user,\n            authenticate,\n            signOut\n        }}>\n            {children}\n        </UserContext.Provider>\n    )    \n}\n\n\n\nexport const useAuth = () => useContext(UserContext)"],"mappings":";;;;AAAA,SAASA,aAAT,EAAwBC,UAAxB,EAAoCC,SAApC,EAA+CC,QAA/C,QAA+D,OAA/D;AAEA,OAAOC,YAAP,MAAuC,yBAAvC;AACA,SAASC,cAAT,EAAyBC,MAAzB,QAAuC,6BAAvC;AACA,SAAuCC,mBAAvC,QAAkE,4BAAlE;;AAWA,MAAMC,WAAW,gBAAGR,aAAa,CAAmB;EAChDS,IAAI,EAAC,IAD2C;EAEhDC,YAAY,EAAC,MAAOC,QAAP,IAAoB,CAAE,CAFa;EAGhDC,OAAO,EAAC,YAAY,CAAE;AAH0B,CAAnB,CAAjC;AAKA,OAAO,MAAMC,kBAAkB,GAAG,QAA0D;EAAA;;EAAA,IAAzD;IAACC,QAAD;IAAUC;EAAV,CAAyD;EACxF,MAAM,CAACN,IAAD,EAAOO,OAAP,IAAkBb,QAAQ,CAAc,IAAd,CAAhC;EACA,MAAMc,gBAA6C,GAAGV,mBAAmB,EAAzE;;EACA,MAAMW,cAAc,GAAG,YAAY;IAC/BD,gBAAgB,CAACE,UAAjB,CAA4B,IAA5B;IACA,MAAMC,WAA+B,GAAE,MAAMf,cAAc,EAA3D;IACAY,gBAAgB,CAACI,UAAjB;IACAL,OAAO,CAACI,WAAD,CAAP;EACH,CALD;;EAMAlB,SAAS,CAAC,MAAM;IACZ,IAAGa,gBAAH,EAAoB;MAChBG,cAAc;IACjB;EACJ,CAJQ,EAIP,CAACH,gBAAD,CAJO,CAAT;;EAKA,MAAML,YAAY,GAAG,OAAOC,QAAP,EAA0BW,KAA1B,EAAyCC,QAAzC,EAA2DC,QAA3D,KAAgF;IACjGP,gBAAgB,CAACE,UAAjB,CAA4B,IAA5B;IACA,MAAMM,MAA0B,GAAG,MAAMrB,YAAY,CAACO,QAAD,EAAWW,KAAX,EAAkBC,QAAlB,EAA4BC,QAA5B,CAArD;IACAP,gBAAgB,CAACI,UAAjB;;IACA,IAAGI,MAAH,EAAU;MACNT,OAAO,CAACS,MAAD,CAAP;IACH;EACJ,CAPD;;EAQA,MAAMb,OAAO,GAAG,YAAY;IACxBK,gBAAgB,CAACE,UAAjB,CAA4B,IAA5B;IACA,MAAMb,MAAM,EAAZ;IACAW,gBAAgB,CAACI,UAAjB;IACAL,OAAO,CAAC,IAAD,CAAP;EACH,CALD;;EAMA,oBACI,QAAC,WAAD,CAAa,QAAb;IAAsB,KAAK,EAAE;MACzBP,IADyB;MAEzBC,YAFyB;MAGzBE;IAHyB,CAA7B;IAAA,UAKKE;EALL;IAAA;IAAA;IAAA;EAAA,QADJ;AASH,CArCM;;GAAMD,kB;UAE6CN,mB;;;KAF7CM,kB;AAyCb,OAAO,MAAMa,OAAO,GAAG;EAAA;;EAAA,OAAMzB,UAAU,CAACO,WAAD,CAAhB;AAAA,CAAhB;;IAAMkB,O"},"metadata":{},"sourceType":"module"}