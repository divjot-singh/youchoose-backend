{"ast":null,"code":"import { getAuth, GoogleAuthProvider, signInWithPopup } from \"firebase/auth\";\nimport { initializeApp } from \"firebase/app\";\nimport { getAnalytics } from \"firebase/analytics\";\nimport { UserType } from '../entities/user';\nimport { LocalStorageKeys } from '../utils/localstorageKeys';\nimport LocalStorageMethods from './localstorageService';\nconst firebaseConfig = {\n  apiKey: process.env.REACT_APP_FIREBASE_API_KEY,\n  authDomain: process.env.REACT_APP_FIREBASE_AUTH_DOMAIN,\n  projectId: process.env.REACT_APP_FIREBASE_PROJECT_ID,\n  storageBucket: process.env.REACT_APP_FIREBASE_STORAGE_BUCKET,\n  messagingSenderId: process.env.REACT_APP_FIREBASE_MESSAGING_SENDER_ID,\n  appId: process.env.REACT_APP_FIREBASE_API_ID,\n  measurementId: process.env.REACT_APP_FIREBASE_MEASUREMENT_ID\n};\nexport const InitialiseFirebaseApp = () => {\n  console.log(firebaseConfig);\n  const app = initializeApp(firebaseConfig);\n  const analytics = getAnalytics(app);\n};\n_c = InitialiseFirebaseApp;\n\nconst getUser = (firebaseUser, userType, token) => {\n  const user = {\n    display_name: firebaseUser.displayName || '',\n    email: firebaseUser.email || '',\n    photo_url: firebaseUser.photoURL || '',\n    uid: firebaseUser.uid,\n    user_type: userType,\n    token: token\n  };\n  return user;\n};\n\nexport const SaveUserToLocalStorage = user => {\n  LocalStorageMethods.set(LocalStorageKeys.user_id, user.uid);\n  LocalStorageMethods.set(LocalStorageKeys.token, user.token);\n};\n_c2 = SaveUserToLocalStorage;\nexport const RemoveUserFromLocalStorage = () => {\n  LocalStorageMethods.delete(LocalStorageKeys.user_id);\n  LocalStorageMethods.delete(LocalStorageKeys.token);\n};\n_c3 = RemoveUserFromLocalStorage;\nexport const SignUpWithGoogle = async () => {\n  const auth = getAuth();\n  const provider = new GoogleAuthProvider();\n\n  try {\n    const result = await signInWithPopup(auth, provider);\n\n    if (result) {\n      const credential = GoogleAuthProvider.credentialFromResult(result);\n      const token = credential === null || credential === void 0 ? void 0 : credential.accessToken;\n      const user = getUser(result.user, UserType.MODERATOR, token || '');\n      SaveUserToLocalStorage(user);\n      return user;\n    }\n  } catch (err) {}\n\n  signInWithPopup(auth, provider).then(result => {\n    if (result) {\n      const credential = GoogleAuthProvider.credentialFromResult(result);\n      const token = credential === null || credential === void 0 ? void 0 : credential.accessToken;\n      const user = getUser(result.user, UserType.MODERATOR, token || '');\n      SaveUserToLocalStorage(user);\n    }\n  }).catch(error => {\n    // Handle Errors here.\n    const errorCode = error.code;\n    const errorMessage = error.message; // The email of the user's account used.\n\n    const email = error.customData.email; // The AuthCredential type that was used.\n\n    const credential = GoogleAuthProvider.credentialFromError(error); // ...\n  });\n};\n_c4 = SignUpWithGoogle;\n\nvar _c, _c2, _c3, _c4;\n\n$RefreshReg$(_c, \"InitialiseFirebaseApp\");\n$RefreshReg$(_c2, \"SaveUserToLocalStorage\");\n$RefreshReg$(_c3, \"RemoveUserFromLocalStorage\");\n$RefreshReg$(_c4, \"SignUpWithGoogle\");","map":{"version":3,"names":["getAuth","GoogleAuthProvider","signInWithPopup","initializeApp","getAnalytics","UserType","LocalStorageKeys","LocalStorageMethods","firebaseConfig","apiKey","process","env","REACT_APP_FIREBASE_API_KEY","authDomain","REACT_APP_FIREBASE_AUTH_DOMAIN","projectId","REACT_APP_FIREBASE_PROJECT_ID","storageBucket","REACT_APP_FIREBASE_STORAGE_BUCKET","messagingSenderId","REACT_APP_FIREBASE_MESSAGING_SENDER_ID","appId","REACT_APP_FIREBASE_API_ID","measurementId","REACT_APP_FIREBASE_MEASUREMENT_ID","InitialiseFirebaseApp","console","log","app","analytics","getUser","firebaseUser","userType","token","user","display_name","displayName","email","photo_url","photoURL","uid","user_type","SaveUserToLocalStorage","set","user_id","RemoveUserFromLocalStorage","delete","SignUpWithGoogle","auth","provider","result","credential","credentialFromResult","accessToken","MODERATOR","err","then","catch","error","errorCode","code","errorMessage","message","customData","credentialFromError"],"sources":["/Users/divjotsingh/Documents/Youchoose/youchoose/src/services/firebaseService.tsx"],"sourcesContent":["import React from 'react'\nimport { Auth, getAuth, getRedirectResult, GoogleAuthProvider, OAuthCredential, signInWithPopup, signInWithRedirect, UserCredential, User as FirebaseUser } from \"firebase/auth\";\nimport { initializeApp } from \"firebase/app\";\nimport { getAnalytics } from \"firebase/analytics\";\nimport User, { UserType } from '../entities/user';\nimport { LocalStorageKeys } from '../utils/localstorageKeys';\nimport LocalStorageMethods from './localstorageService';\nconst firebaseConfig = {\n  apiKey: process.env.REACT_APP_FIREBASE_API_KEY,\n  authDomain: process.env.REACT_APP_FIREBASE_AUTH_DOMAIN,\n  projectId: process.env.REACT_APP_FIREBASE_PROJECT_ID,\n  storageBucket: process.env.REACT_APP_FIREBASE_STORAGE_BUCKET,\n  messagingSenderId: process.env.REACT_APP_FIREBASE_MESSAGING_SENDER_ID,\n  appId: process.env.REACT_APP_FIREBASE_API_ID,\n  measurementId: process.env.REACT_APP_FIREBASE_MEASUREMENT_ID\n};\n\nexport const InitialiseFirebaseApp = () => {\n    console.log(firebaseConfig)\n    const app = initializeApp(firebaseConfig);\n    const analytics = getAnalytics(app);\n}\n\nconst getUser = (firebaseUser:FirebaseUser, userType:UserType, token:string):User => {\n    const user:User = {\n        display_name: firebaseUser.displayName || '',\n        email: firebaseUser.email || '',\n        photo_url: firebaseUser.photoURL || '',\n        uid: firebaseUser.uid,\n        user_type: userType,\n        token: token\n    } \n\n    return user;\n}\n\nexport const SaveUserToLocalStorage = (user:User) => {\n    LocalStorageMethods.set(LocalStorageKeys.user_id, user.uid)\n    LocalStorageMethods.set(LocalStorageKeys.token, user.token)\n}\n\nexport const RemoveUserFromLocalStorage = () => {\n    LocalStorageMethods.delete(LocalStorageKeys.user_id)\n    LocalStorageMethods.delete(LocalStorageKeys.token)\n}\n\nexport const SignUpWithGoogle = async (): Promise<User | void> => {\n        const auth : Auth = getAuth();\n        const provider:GoogleAuthProvider = new GoogleAuthProvider();\n        try{\n            const result: UserCredential | null = await signInWithPopup(auth, provider)\n            if(result){\n                const credential: OAuthCredential | null = GoogleAuthProvider.credentialFromResult(result);\n                const token = credential?.accessToken;\n                const user = getUser(result.user, UserType.MODERATOR, token || '');\n                SaveUserToLocalStorage(user)\n                return user;\n            }\n\n        } catch(err){\n\n        }\n        signInWithPopup(auth, provider)\n        .then((result : UserCredential | null) => {\n            if(result){\n                const credential: OAuthCredential | null = GoogleAuthProvider.credentialFromResult(result);\n                const token = credential?.accessToken;\n                const user = getUser(result.user, UserType.MODERATOR, token || '');\n                SaveUserToLocalStorage(user)\n            }\n        }).catch((error) => {\n            // Handle Errors here.\n            const errorCode = error.code;\n            const errorMessage = error.message;\n            // The email of the user's account used.\n            const email = error.customData.email;\n            // The AuthCredential type that was used.\n            const credential = GoogleAuthProvider.credentialFromError(error);\n            // ...\n        });\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}